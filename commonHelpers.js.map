{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_jJ5aLGn50ZkM07nMxodxDW7fSjdGGLoPRReFN6eyXEoTBwtctXneqCxESjN80VWx';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\n\nconst axiosInstance = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    'x-api-key': API_KEY,\n    'Content-Type': 'application/json', \n  },\n});\n\nexport function fetchBreeds() {\n  return axiosInstance.get('/breeds')\n    .then(response => response.data)\n    .catch(error => {\n      console.error(`Error fetching breeds: ${error}`);\n      return Promise.resolve([]);\n    });\n  \n}\n\nexport function fetchCatByBreed(id) {\n  return axiosInstance.get(`/images/search?breed_ids=${id}&api_key${API_KEY}`)\n    .then(response => {\n      \n      return response.data\n})\n    .catch(error => {\n      throw new Error(error.response.statusText);\n    });\n}","import { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport SlimSelect from 'slim-select';\nimport '../node_modules/slim-select/dist/slimselect.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.css';\n\nconst optionsContainer = document.querySelector('.breed-select');\nconst infoContainer = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\n\nfunction optionsMarkup(data) {\n  return data\n    .map(item => {\n      const { name, id } = item;\n      return `<option value=\"${id}\">${name}</option>`;\n    })\n    .join('');\n}\n\nfunction catMarkup(cat) {\n  const {\n    url,\n    breeds: {\n      0: { description, temperament, name },\n    },\n  } = cat[0];\n    return `<h2>${name}</h2>\n  <div class=\"info-container\">\n  <img width=\"500\" src=\"${url}\" class=\"cat-image\">\n  <div class=\"text-container\">\n  <p class=\"cat-p\">${description}</p>\n  <p class=\"cat-p\">\n  <span class=\"bold\">Temperament: </span>${temperament}</p>\n  </div>\n  </div>`;\n}\n\nfetchBreeds()\n  .then(data => {\n    if (Array.isArray(data) && data.length > 0) {\n      optionsContainer.innerHTML =\n        `<option data-placeholder=\"true\"></option>` + optionsMarkup(data);\n      loader.style.visibility = 'hidden'; \n    } else {\n      optionsContainer.innerHTML = '';\n    }\n  })\n  .then(() => {\n    new SlimSelect({\n      select: '#single',\n      settings: {\n        placeholderText: 'Select a cat',\n      },\n      events: {\n        afterChange: () => {\n          infoContainer.style.visibility = 'hidden';\n          loader.style.visibility = 'visible'; \n          fetchCatByBreed(optionsContainer.value)\n            .then(cat => {\n              loader.style.visibility = 'hidden';\n              infoContainer.style.visibility = 'visible';\n              infoContainer.innerHTML = catMarkup(cat);\n\n              if (cat.length === 0) {\n                optionsContainer.innerHTML = '';\n                iziToast.error({\n                  title: 'Error!',\n                  message: 'Oops! Something went wrong while loading breeds.',\n                  position: 'topRight',\n                });\n                return;\n              }\n            })\n            .catch(error => {\n              loader.style.visibility = 'hidden'; \n              infoContainer.style.visibility = 'hidden';\n              console.error(`Error occurred: ${error}`);\n              iziToast.error({\n                title: 'Error!',\n                message: 'Oops! Something went wrong while loading the cat.',\n                position: 'topRight',\n              });\n            });\n        },\n      },\n    });\n  })\n  \n\n  "],"names":["API_KEY","BASE_URL","axiosInstance","axios","fetchBreeds","response","error","fetchCatByBreed","id","optionsContainer","infoContainer","loader","optionsMarkup","data","item","name","catMarkup","cat","url","description","temperament","SlimSelect","iziToast"],"mappings":"owBAEA,MAAMA,EACJ,wEAEIC,EAAW,+BAEXC,EAAgBC,EAAM,OAAO,CACjC,QAASF,EACT,QAAS,CACP,YAAaD,EACb,eAAgB,kBACjB,CACH,CAAC,EAEM,SAASI,GAAc,CAC5B,OAAOF,EAAc,IAAI,SAAS,EAC/B,KAAKG,GAAYA,EAAS,IAAI,EAC9B,MAAMC,IACL,QAAQ,MAAM,0BAA0BA,GAAO,EACxC,QAAQ,QAAQ,CAAA,CAAE,EAC1B,CAEL,CAEO,SAASC,EAAgBC,EAAI,CAClC,OAAON,EAAc,IAAI,4BAA4BM,YAAaR,GAAS,EACxE,KAAKK,GAEGA,EAAS,IACrB,EACI,MAAMC,GAAS,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,UAAU,CAC/C,CAAK,CACL,CC5BA,MAAMG,EAAmB,SAAS,cAAc,eAAe,EACzDC,EAAgB,SAAS,cAAc,WAAW,EAClDC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,EAAcC,EAAM,CAC3B,OAAOA,EACJ,IAAIC,GAAQ,CACX,KAAM,CAAE,KAAAC,EAAM,GAAAP,CAAI,EAAGM,EACrB,MAAO,kBAAkBN,MAAOO,YACtC,CAAK,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,EAAUC,EAAK,CACtB,KAAM,CACJ,IAAAC,EACA,OAAQ,CACN,EAAG,CAAE,YAAAC,EAAa,YAAAC,EAAa,KAAAL,CAAM,CACtC,CACL,EAAME,EAAI,GACN,MAAO,OAAOF;AAAA;AAAA,0BAEQG;AAAA;AAAA,qBAELC;AAAA;AAAA,2CAEsBC;AAAA;AAAA,SAG3C,CAEAhB,EAAa,EACV,KAAKS,GAAQ,CACR,MAAM,QAAQA,CAAI,GAAKA,EAAK,OAAS,GACvCJ,EAAiB,UACf,4CAA8CG,EAAcC,CAAI,EAClEF,EAAO,MAAM,WAAa,UAE1BF,EAAiB,UAAY,EAEnC,CAAG,EACA,KAAK,IAAM,CACV,IAAIY,EAAW,CACb,OAAQ,UACR,SAAU,CACR,gBAAiB,cAClB,EACD,OAAQ,CACN,YAAa,IAAM,CACjBX,EAAc,MAAM,WAAa,SACjCC,EAAO,MAAM,WAAa,UAC1BJ,EAAgBE,EAAiB,KAAK,EACnC,KAAKQ,GAAO,CAKX,GAJAN,EAAO,MAAM,WAAa,SAC1BD,EAAc,MAAM,WAAa,UACjCA,EAAc,UAAYM,EAAUC,CAAG,EAEnCA,EAAI,SAAW,EAAG,CACpBR,EAAiB,UAAY,GAC7Ba,EAAS,MAAM,CACb,MAAO,SACP,QAAS,mDACT,SAAU,UAC5B,CAAiB,EACD,MACD,CACf,CAAa,EACA,MAAMhB,GAAS,CACdK,EAAO,MAAM,WAAa,SAC1BD,EAAc,MAAM,WAAa,SACjC,QAAQ,MAAM,mBAAmBJ,GAAO,EACxCgB,EAAS,MAAM,CACb,MAAO,SACP,QAAS,oDACT,SAAU,UAC1B,CAAe,CACf,CAAa,CACJ,CACF,CACP,CAAK,CACF,CAAA"}